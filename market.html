<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="CryptoVerse Market - Real-time cryptocurrency and forex charts">
    <meta name="theme-color" content="#050816">
    <title>Market - CryptoVerse</title>

    <link rel="stylesheet" href="css/style.css">
    <script src="js/app.js"></script>
    <!-- Preconnect to external services for faster loading -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <!-- DNS Prefetch for faster resolution -->
    <link rel="dns-prefetch" href="https://api.binance.com">
    <link rel="dns-prefetch" href="https://cryptoverse-api.vercel.app">
    <!-- Critical rendering path scripts -->
    <script src="js/theme.js"></script>
    <script src="js/api.js"></script>
    <!-- Deferred external scripts -->
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.45.0/apexcharts.min.js"></script>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">‚ö° CRYPTOVERSE</div>
        <nav class="nav">
            <a href="home.html">Home</a>
            <a href="trade.html">Trade</a>
            <a href="wallet.html">Wallet</a>
            <a href="market.html">Market</a>
            <div class="dropdown">
                <a href="#" class="dropdown-toggle">More ‚ñº</a>
                <div class="dropdown-menu">
                    <a href="home.html">Home</a>
                    <a href="notifications.html">Notifications</a>
                    <a href="profile.html">Profile</a>
                    <a href="trending.html">Trending Articles</a>
                    <a href="news.html">News</a>
                    <a href="bookmarks.html">Bookmarks</a>
                    <a href="history.html">History</a>
                    <a href="mining.html">Mining</a>
                    <a href="creator.html">Creator Center</a>
                    <a href="settings.html">Settings</a>
                    <a href="support.html">Help & Support</a>
                </div>
            </div>
        </nav>
        <div class="header-profile">
            <span style="color: #66B2FF; font-weight: 600;">üë§</span>
            <a href="profile.html" style="color: #ffffff; text-decoration: none; font-weight: 600;"><span
                    id="name"></span></a>
        </div>
    </header>



    <main class="main-content">
        <div id="binance-ticker-tape" style="margin-bottom: 2rem;"></div>

        <div class="container market-insights-layout">
            <div class="market-main-content">
                <h1 class="page-title">üìä Global Market Insights</h1>

                <div class="binance-market-overview-container"
                    style="margin-bottom: 3rem; background: rgba(10, 14, 39, 0.6); border-radius: 20px; padding: 1.5rem; border: 1px solid rgba(0, 212, 255, 0.2); position: relative;">
                    <h2 style="color: #00d4ff; margin-bottom: 1.5rem; text-align: center;">üìà Binance Live Market Health
                    </h2>
                    <button class="fullscreen-btn" onclick="toggleFullScreen('binance-market-overview')">‚õ∂</button>
                    <div id="binance-market-overview" style="height: 700px;"></div>
                </div>

                <h2 style="color: #00d4ff; margin-bottom: 2rem;">üî• Assets & Fast Trading</h2>
                <div class="market-grid" id="market-grid">
                    <!-- Coins will be loaded by JS -->
                </div>

                <!-- Binance Market Screener -->
                <div class="binance-screener-container"
                    style="margin-top: 4rem; background: rgba(10, 14, 39, 0.6); border-radius: 20px; padding: 1.5rem; border: 1px solid rgba(0, 212, 255, 0.2);">
                    <h2 style="color: #00d4ff; margin-bottom: 1.5rem;">üîç Binance Market Screener</h2>
                    <div id="binance-market-screener" style="height: 800px;"></div>
                </div>
            </div>

            <aside class="market-sidebar">
                <div class="binance-news-container"
                    style="background: rgba(10, 14, 39, 0.6); border-radius: 20px; padding: 1.5rem; border: 1px solid rgba(0, 212, 255, 0.2); height: 100%;">
                    <h2 style="color: #00d4ff; margin-bottom: 1.5rem;">üåç Global Crypto News</h2>
                    <div id="binance-financial-news" style="height: 1200px;"></div>
                </div>
            </aside>
        </div>
    </main>

    <!-- Coin Detail Modal -->
    <div id="coin-detail-modal" class="modal">
        <div class="modal-content coin-modal-content">
            <button onclick="closeCoinDetail()" class="modal-close">√ó</button>

            <div class="coin-detail-header">
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <span class="coin-detail-icon" id="detail-icon"></span>
                    <div>
                        <h2 id="detail-name" style="margin: 0; color: #00d4ff;"></h2>
                        <p id="detail-symbol" style="margin: 0.3rem 0 0 0; color: rgba(224, 242, 254, 0.6);"></p>
                    </div>
                </div>
                <div style="text-align: right;">
                    <h1 id="detail-price" style="margin: 0; color: #00d4ff; font-size: 2.5rem;"></h1>
                    <p id="detail-change" style="margin: 0.5rem 0 0 0; font-size: 1.2rem;"></p>
                </div>
            </div>

            <div class="chart-container"
                style="height: 850px; margin: 2rem 0; display: flex; flex-direction: column; gap: 1rem; position: relative;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <button class="fullscreen-btn" onclick="toggleFullScreen('market-indicator-chart-container')">‚õ∂ Full
                        Screen
                        Chart</button>
                    <div style="display: flex; gap: 10px;">
                        <button id="market-display-btn" class="indicator-toggle-market"
                            style="display: none; background: rgba(0,0,0,0.5); border: 1px solid #00d4ff;"
                            onclick="toggleMarketBotDisplay()">
                            üëÅÔ∏è Hide View
                        </button>
                        <button id="market-indicator-btn" class="indicator-toggle-market"
                            onclick="toggleMarketIndicator()">
                            ü§ñ Activate Cryptoverse Bot
                        </button>
                    </div>
                </div>

                <!-- TradingView Style OHLC Legend -->
                <div id="chart-ohlc-legend"
                    style="position: absolute; top: 80px; left: 20px; z-index: 10; font-family: 'Inter', sans-serif; font-size: 13px; font-weight: 500; pointer-events: none; background: rgba(19, 23, 34, 0.7); padding: 5px 10px; border-radius: 4px;">
                </div>

                <!-- Main Chart Container (ApexCharts) - Default View -->
                <div id="market-indicator-chart-container"
                    style="display: block; width: 100%; flex: 2; min-height: 500px; background: #131722; border: 1px solid #2a2e39; border-radius: 4px; margin-top: 1rem;">
                </div>

                <div id="market-indicator-panel" class="market-indicator-panel"
                    style="display: none; flex: 0.5; width: 100%; background: rgba(0, 212, 255, 0.05); border: 1px solid rgba(0, 212, 255, 0.2); border-radius: 8px; padding: 1rem; max-height: 150px; overflow-y: auto;">
                    <div style="display: flex; align-items: center; gap: 1rem; justify-content: space-between;">
                        <div>
                            <h4 style="margin: 0 0 0.5rem 0; color: #00d4ff;">ü§ñ Cryptoverse Bot Status</h4>
                            <p id="market-bot-status" style="margin: 0; font-size: 0.9rem; color: #a0a0a0;">Status:
                                <strong id="market-bot-status-text">Inactive</strong>
                            </p>
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <button onclick="deactivateMarketIndicator()" class="indicator-control-btn"
                                style="background: #ff6600;">‚èπÔ∏è Stop</button>
                        </div>
                    </div>
                </div>
            </div>


            <div class="buy-section">
                <div class="wallet-info-box">
                    <p>üí∞ Your Wallet Balance: <strong id="current-balance">$0.00</strong></p>
                </div>

                <h3 style="color: #00d4ff; margin-bottom: 1rem;">Buy <span id="buy-symbol"></span></h3>

                <div class="buy-controls">
                    <label>Amount:</label>
                    <input type="number" id="buy-amount" value="1" min="0.01" step="0.01">
                </div>

                <p class="total-cost" id="total-cost">Total: $0.00</p>

                <div class="payment-method-selector">
                    <label>Payment Method:</label>
                    <select id="payment-method" class="payment-select">
                        <option value="wallet">Use Wallet Balance</option>
                        <option value="upi">UPI Payment</option>
                        <option value="card">Credit/Debit Card</option>
                    </select>
                </div>

                <button class="btn-primary btn-full" id="buy-btn-modal">üí≥ Buy Now</button>
            </div>
        </div>
    </div>

    <script defer src="js/app.js"></script>
    <script defer src="js/advanced-indicator.js"></script>
    <script defer src="js/indicator-renderer.js"></script>
    <script defer src="js/notification-system.js"></script>
    <script defer src="js/chart.js"></script>
    <script defer src="js/market.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const nameEl = document.getElementById("name");
            const username = localStorage.getItem("username");
            const emailEl = localStorage.getItem("email")
            if (nameEl && username) {
                nameEl.textContent = username;
            }
        });
    </script>
</body>

</html>