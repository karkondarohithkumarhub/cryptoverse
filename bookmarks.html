<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bookmarks - CryptoVerse</title>
    <link rel="stylesheet" href="css/style.css?v=2.0">
    <script src="js/theme.js"></script>


    <script src="js/app.js"></script>

</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">âš¡ CRYPTOVERSE</div>
        <nav class="nav">
            <a href="home.html">Home</a>
            <a href="trade.html">Trade</a>
            <a href="wallet.html">Wallet</a>
            <a href="market.html">Market</a>
            <div class="dropdown">
                <a href="#" class="dropdown-toggle">More â–¼</a>
                <div class="dropdown-menu">
                    <a href="home.html">Home</a>
                    <a href="notifications.html">Notifications</a>
                    <a href="profile.html">Profile</a>
                    <a href="trending.html">Trending Articles</a>
                    <a href="news.html">News</a>
                    <a href="bookmarks.html">Bookmarks</a>
                    <a href="history.html">History</a>
                    <a href="mining.html">Mining</a>
                    <a href="creator.html">Creator Center</a>
                    <a href="settings.html">Settings</a>
                    <a href="support.html">Help & Support</a>
                </div>
            </div>
        </nav>
        <div class="header-profile">
            <span style="color: #8742bd; font-weight: 600;">ðŸ‘¤</span>
            <a href="profile.html" style="color: #ffffff; text-decoration: none; font-weight: 600;"><span
                    id="name"></span></a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container" style="max-width: 800px; padding-top: 2rem;">
            <h1 class="page-title">ðŸ”– Bookmarked Items & Watchlist</h1>

            <!-- Watchlist Coins -->
            <section style="margin-bottom: 2rem;">
                <h2
                    style="font-size: 1.2rem; color: #00d4ff; margin-bottom: 1rem; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 0.5rem;">
                    Watchlist Coins
                </h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 1rem;">
                    <div class="watchlist-coin">
                        <span style="font-size: 2rem; display: block; margin-bottom: 0.5rem;">â‚¿</span>
                        <strong>Bitcoin</strong>
                        <div class="coin-price">$0</div>
                    </div>
                    <div class="watchlist-coin">
                        <span style="font-size: 2rem; display: block; margin-bottom: 0.5rem;">Îž</span>
                        <strong>Ethereum</strong>
                        <div class="coin-price">$0</div>
                    </div>
                    <div class="watchlist-coin">
                        <span style="font-size: 2rem; display: block; margin-bottom: 0.5rem;">â—Ž</span>
                        <strong>Solana</strong>
                        <div class="coin-price">$0</div>
                    </div>
                </div>
            </section>

            <!-- Saved Articles -->
            <section>
                <h2
                    style="font-size: 1.2rem; color: #00d4ff; margin-bottom: 1rem; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 0.5rem;">
                    Saved Articles
                </h2>
                <div id="savedArticles"></div>
            </section>
        </div>
    </main>

    <!-- Scripts -->
    <script>

        document.addEventListener("DOMContentLoaded", () => {
            const nameEl = document.getElementById("name");
            const username = localStorage.getItem("username");
            const emailEl = localStorage.getItem("email")
            if (nameEl && username) {
                nameEl.textContent = username;
            }
        });

        // ===== Watchlist Coins =====
        const coins = [
            { id: "bitcoin", symbol: "â‚¿", name: "Bitcoin" },
            { id: "ethereum", symbol: "Îž", name: "Ethereum" },
            { id: "solana", symbol: "â—Ž", name: "Solana" }
        ];

        async function updatePrices() {
            try {
                const ids = coins.map(c => c.id).join(',');
                const res = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${ids}&vs_currencies=usd&include_24hr_change=true`);
                const data = await res.json();

                coins.forEach((coin, index) => {
                    const card = document.querySelectorAll(".watchlist-coin")[index];
                    const priceChange = data[coin.id].usd_24h_change;

                    card.querySelector(".coin-price").textContent = `$${data[coin.id].usd.toFixed(2)} (${priceChange.toFixed(2)}%)`;
                    card.querySelector(".coin-price").style.color = priceChange >= 0 ? "#10b981" : "#ff4757";
                });

            } catch (err) {
                console.error("Failed to fetch coin prices", err);
            }
        }

        updatePrices();
        setInterval(updatePrices, 30000); // refresh every 30 seconds

        // ===== Saved Articles =====
        let savedArticles = JSON.parse(localStorage.getItem("savedArticles")) || [];

        function renderArticles() {
            const container = document.getElementById("savedArticles");
            if (savedArticles.length === 0) {
                container.innerHTML = "<p>No articles saved yet. Go to News and save some!</p>";
                return;
            }

            container.innerHTML = savedArticles.map(a => `
                <div class="card">
                    <div>
                        <h3 style="margin: 0;">${a.title}</h3>
                        <small >Added ${a.added}</small>
                    </div>
                    <button class="btn-remove" onclick="removeArticle('${a.title}')">Remove</button>
                </div>
            `).join("");
        }

        function removeArticle(title) {
            savedArticles = savedArticles.filter(a => a.title !== title);
            localStorage.setItem("savedArticles", JSON.stringify(savedArticles));
            renderArticles();
        }

        renderArticles();
    </script>
</body>

</html>